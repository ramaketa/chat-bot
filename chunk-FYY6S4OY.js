import{$ as L,$a as A,Ba as h,Bb as Ee,Ca as c,E as H,F as Ke,Fa as be,Ja as q,Ka as tt,L as pe,La as N,Lb as dt,N as P,P as me,Q as D,Qa as F,R as ge,Ra as De,Sa as z,T as M,Ta as nt,Ua as K,Va as I,W as m,Wa as it,Xa as rt,Ya as st,Za as f,_ as w,_a as y,a as o,aa as ye,ab as ot,b as d,ba as E,bb as k,ca as Ze,cb as Z,e as Ue,f as fe,fb as at,gb as lt,ha as Je,hb as ut,i as Be,ia as Qe,ib as S,ja as _e,jb as J,k as He,ka as ve,kb as T,l as Le,la as Ye,lb as Q,m as b,ma as Xe,mb as Me,nb as Ae,o as $e,oa as Ce,pb as ct,q as B,qa as $,ra as et,sa as Ve,ta as W,w as We,x as qe,xb as we,yb as Y,z as ze,zb as X}from"./chunk-DJ2RA5VO.js";var p=function(t){return t.CHATBOT="CHATBOT",t.USER="USER",t}(p||{});var ee=class{static getPassedTimeWithDeclaration(e){let i=Number((e/1e3).toFixed(1)),n=Number((e/(1e3*60)).toFixed(1)),r=Number((e/(1e3*60*60)).toFixed(1)),s=Number((e/(1e3*60*60*24)).toFixed(1));return i<60?"< 1 \u043C\u0438\u043D":n<60?n+" \u043C\u0438\u043D":r<24?r+" \u0447":s+" \u0434\u043D\u0435\u0439"}};var ht=(()=>{let e=class e{transform(n){return n?qe(0,1e3).pipe(B(()=>{let r=Math.abs(new Date().getTime()-n.getTime());return ee.getPassedTimeWithDeclaration(r)})):b("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=Ze({name:"passedTime",type:e,pure:!0,standalone:!0});let t=e;return t})();function Jt(t,e){t&1&&A(0,"img",8)}function Qt(t,e){t&1&&A(0,"img",9)}function Yt(t,e){if(t&1&&(f(0,"div",1),F(1,Jt,1,0)(2,Qt,1,0),f(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5),S(7),y(),f(8,"div",6),S(9),Me(10,"passedTime"),Me(11,"async"),y()(),f(12,"div",7),S(13),y()()()()),t&2){let i,n,r,s,a,l,u=Z();K("message-container_"+((i=u.message())==null||i.author==null?null:i.author.type)),h(),I(1,(n=(n=u.message())==null||n.author==null?null:n.author.type)===u.authorTypeEnum.CHATBOT?1:n===u.authorTypeEnum.USER?2:-1),h(6),J(" ",(r=u.message())==null||r.author==null?null:r.author.name," "),h(2),J(" ",Ae(11,9,Ae(10,7,(s=u.message())==null?null:s.created))," "),h(3),De("data-test-id",((a=u.message())==null||a.author==null?null:a.author.type)==u.authorTypeEnum.CHATBOT?"bot-message":"user-message"),h(),J(" ",(l=u.message())==null?null:l.text," ")}}var ft=(()=>{let e=class e{constructor(){this.message=et(),this.authorTypeEnum=p}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=L({type:e,selectors:[["app-message"]],inputs:{message:[w.SignalBased,"message"]},standalone:!0,features:[Q],decls:1,vars:1,consts:[[1,"message-container",3,"class"],[1,"message-container"],[1,"message"],[1,"message__body"],[1,"message__header"],[1,"message__header__author-name"],[1,"message__header__message-date"],[1,"message__text"],["src","assets/icons/bot.svg","alt","chatbot-icon",1,"author-icon"],["src","assets/icons/user.svg","alt","chatbot-icon",1,"author-icon"]],template:function(r,s){r&1&&F(0,Yt,14,11,"div",0),r&2&&I(0,s.message()?0:-1)},dependencies:[ht,dt],styles:['@charset "UTF-8";.message-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start;justify-content:flex-start;gap:1rem;padding:1rem 4rem 1rem 1rem;width:fit-content}.message-container_USER[_ngcontent-%COMP%]{margin-right:auto;padding-left:unset}.message-container_CHATBOT[_ngcontent-%COMP%]{margin-left:auto;background-color:#fff;border-radius:.5rem;box-shadow:0 1px 10px 2px #223c501a}.message__header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.message__header__author-name[_ngcontent-%COMP%]{font-weight:600}.message__header__message-date[_ngcontent-%COMP%]{color:#bbbbbbb8;font-size:.75rem}.message__header__message-date[_ngcontent-%COMP%]:before{content:"\\2022  "}.message__text[_ngcontent-%COMP%]{margin-top:1rem}']});let t=e;return t})();var pt=()=>"10000000-1000-4000-8000-100000000000".replace(/[018]/g,t=>(+t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>+t/4).toString(16));var te=class{constructor(e){if(this.type=e.type,this.name=e.name,!this.name)switch(e.type){case p.CHATBOT:this.name="\u0410\u0441\u0441\u0438\u0441\u0442\u0435\u043D\u0442";break;case p.USER:this.name="\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C";break}}};var v=class{constructor(e){this.id=e.id??pt(),this.created=typeof e.created=="string"?new Date(e.created):e.created??new Date,this.text=e.text??"\u0442\u0435\u043A\u0441\u0442 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u044F \u043E\u0442\u0441\u0443\u0442\u0441\u0432\u0443\u0435\u0442",e.author?this.author=new te(e.author):console.error("\u041E\u0442\u0441\u0443\u0442\u0441\u0432\u0443\u0435\u0442 \u0430\u0432\u0442\u043E\u0440 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u044F")}};var Vt=(()=>{let e=class e{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}};e.\u0275fac=function(r){return new(r||e)(c(be),c(Ve))},e.\u0275dir=E({type:e});let t=e;return t})(),Xt=(()=>{let e=class e extends Vt{};e.\u0275fac=(()=>{let n;return function(s){return(n||(n=Xe(e)))(s||e)}})(),e.\u0275dir=E({type:e,features:[N]});let t=e;return t})(),bt=new M("");var en={provide:bt,useExisting:me(()=>oe),multi:!0};function tn(){let t=Ee()?Ee().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var nn=new M(""),oe=(()=>{let e=class e extends Vt{constructor(n,r,s){super(n,r),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!tn())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}};e.\u0275fac=function(r){return new(r||e)(c(be),c(Ve),c(nn,8))},e.\u0275dir=E({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){r&1&&k("input",function(l){return s._handleInput(l.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(l){return s._compositionEnd(l.target.value)})},features:[T([en]),N]});let t=e;return t})();function C(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function Dt(t){return t!=null&&typeof t.length=="number"}var rn=new M(""),sn=new M(""),on=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,ie=class{static min(e){return an(e)}static max(e){return ln(e)}static required(e){return un(e)}static requiredTrue(e){return cn(e)}static email(e){return dn(e)}static minLength(e){return hn(e)}static maxLength(e){return fn(e)}static pattern(e){return pn(e)}static nullValidator(e){return Mt(e)}static compose(e){return St(e)}static composeAsync(e){return Ot(e)}};function an(t){return e=>{if(C(e.value)||C(t))return null;let i=parseFloat(e.value);return!isNaN(i)&&i<t?{min:{min:t,actual:e.value}}:null}}function ln(t){return e=>{if(C(e.value)||C(t))return null;let i=parseFloat(e.value);return!isNaN(i)&&i>t?{max:{max:t,actual:e.value}}:null}}function un(t){return C(t.value)?{required:!0}:null}function cn(t){return t.value===!0?null:{required:!0}}function dn(t){return C(t.value)||on.test(t.value)?null:{email:!0}}function hn(t){return e=>C(e.value)||!Dt(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function fn(t){return e=>Dt(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function pn(t){if(!t)return Mt;let e,i;return typeof t=="string"?(i="",t.charAt(0)!=="^"&&(i+="^"),i+=t,t.charAt(t.length-1)!=="$"&&(i+="$"),e=new RegExp(i)):(i=t.toString(),e=t),n=>{if(C(n.value))return null;let r=n.value;return e.test(r)?null:{pattern:{requiredPattern:i,actualValue:r}}}}function Mt(t){return null}function At(t){return t!=null}function wt(t){return ct(t)?Le(t):t}function Et(t){let e={};return t.forEach(i=>{e=i!=null?o(o({},e),i):e}),Object.keys(e).length===0?null:e}function Ft(t,e){return e.map(i=>i(t))}function mn(t){return!t.validate}function It(t){return t.map(e=>mn(e)?e:i=>e.validate(i))}function St(t){if(!t)return null;let e=t.filter(At);return e.length==0?null:function(i){return Et(Ft(i,e))}}function xt(t){return t!=null?St(It(t)):null}function Ot(t){if(!t)return null;let e=t.filter(At);return e.length==0?null:function(i){let n=Ft(i,e).map(wt);return We(n).pipe(B(Et))}}function Pt(t){return t!=null?Ot(It(t)):null}function mt(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function Nt(t){return t._rawValidators}function kt(t){return t._rawAsyncValidators}function Fe(t){return t?Array.isArray(t)?t:[t]:[]}function re(t,e){return Array.isArray(t)?t.includes(e):t===e}function gt(t,e){let i=Fe(e);return Fe(t).forEach(r=>{re(i,r)||i.push(r)}),i}function yt(t,e){return Fe(e).filter(i=>!re(t,i))}var Ie=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=xt(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Pt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,i){return this.control?this.control.hasError(e,i):!1}getError(e,i){return this.control?this.control.getError(e,i):null}};var G=class extends Ie{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Se=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},gn={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Ai=d(o({},gn),{"[class.ng-submitted]":"isSubmitted"}),Tt=(()=>{let e=class e extends Se{constructor(n){super(n)}};e.\u0275fac=function(r){return new(r||e)(c(G,2))},e.\u0275dir=E({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){r&2&&nt("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[N]});let t=e;return t})();var j="VALID",ne="INVALID",O="PENDING",R="DISABLED";function yn(t){return(ae(t)?t.validators:t)||null}function _n(t){return Array.isArray(t)?xt(t):t||null}function vn(t,e){return(ae(e)?e.asyncValidators:t)||null}function Cn(t){return Array.isArray(t)?Pt(t):t||null}function ae(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}var xe=class{constructor(e,i){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(i)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===j}get invalid(){return this.status===ne}get pending(){return this.status==O}get disabled(){return this.status===R}get enabled(){return this.status!==R}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(gt(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(gt(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(yt(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(yt(e,this._rawAsyncValidators))}hasValidator(e){return re(this._rawValidators,e)}hasAsyncValidator(e){return re(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(i=>{i.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=O,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let i=this._parentMarkedDirty(e.onlySelf);this.status=R,this.errors=null,this._forEachChild(n=>{n.disable(d(o({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(d(o({},e),{skipPristineCheck:i})),this._onDisabledChange.forEach(n=>n(!0))}enable(e={}){let i=this._parentMarkedDirty(e.onlySelf);this.status=j,this._forEachChild(n=>{n.enable(d(o({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(d(o({},e),{skipPristineCheck:i})),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===j||this.status===O)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(i=>i._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?R:j}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=O,this._hasOwnPendingAsyncValidator=!0;let i=wt(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(n=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(n,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,i={}){this.errors=e,this._updateControlsErrors(i.emitEvent!==!1)}get(e){let i=e;return i==null||(Array.isArray(i)||(i=i.split(".")),i.length===0)?null:i.reduce((n,r)=>n&&n._find(r),this)}getError(e,i){let n=i?this.get(i):this;return n&&n.errors?n.errors[e]:null}hasError(e,i){return!!this.getError(e,i)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new W,this.statusChanges=new W}_calculateStatus(){return this._allControlsDisabled()?R:this.errors?ne:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(O)?O:this._anyControlsHaveStatus(ne)?ne:j}_anyControlsHaveStatus(e){return this._anyControls(i=>i.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ae(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let i=this._parent&&this._parent.dirty;return!e&&!!i&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=_n(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Cn(this._rawAsyncValidators)}};var jt=new M("CallSetDisabledState",{providedIn:"root",factory:()=>Oe}),Oe="always";function Vn(t,e,i=Oe){Dn(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||i==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),An(t,e),En(t,e),wn(t,e),bn(t,e)}function _t(t,e,i=!0){let n=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(n),e.valueAccessor.registerOnTouched(n)),Mn(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function se(t,e){t.forEach(i=>{i.registerOnValidatorChange&&i.registerOnValidatorChange(e)})}function bn(t,e){if(e.valueAccessor.setDisabledState){let i=n=>{e.valueAccessor.setDisabledState(n)};t.registerOnDisabledChange(i),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(i)})}}function Dn(t,e){let i=Nt(t);e.validator!==null?t.setValidators(mt(i,e.validator)):typeof i=="function"&&t.setValidators([i]);let n=kt(t);e.asyncValidator!==null?t.setAsyncValidators(mt(n,e.asyncValidator)):typeof n=="function"&&t.setAsyncValidators([n]);let r=()=>t.updateValueAndValidity();se(e._rawValidators,r),se(e._rawAsyncValidators,r)}function Mn(t,e){let i=!1;if(t!==null){if(e.validator!==null){let r=Nt(t);if(Array.isArray(r)&&r.length>0){let s=r.filter(a=>a!==e.validator);s.length!==r.length&&(i=!0,t.setValidators(s))}}if(e.asyncValidator!==null){let r=kt(t);if(Array.isArray(r)&&r.length>0){let s=r.filter(a=>a!==e.asyncValidator);s.length!==r.length&&(i=!0,t.setAsyncValidators(s))}}}let n=()=>{};return se(e._rawValidators,n),se(e._rawAsyncValidators,n),i}function An(t,e){e.valueAccessor.registerOnChange(i=>{t._pendingValue=i,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&Rt(t,e)})}function wn(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&Rt(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function Rt(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function En(t,e){let i=(n,r)=>{e.valueAccessor.writeValue(n),r&&e.viewToModelUpdate(n)};t.registerOnChange(i),e._registerOnDestroy(()=>{t._unregisterOnChange(i)})}function Fn(t,e){if(!t.hasOwnProperty("model"))return!1;let i=t.model;return i.isFirstChange()?!0:!Object.is(e,i.currentValue)}function In(t){return Object.getPrototypeOf(t.constructor)===Xt}function Sn(t,e){if(!e)return null;Array.isArray(e);let i,n,r;return e.forEach(s=>{s.constructor===oe?i=s:In(s)?n=s:r=s}),r||n||i||null}function vt(t,e){let i=t.indexOf(e);i>-1&&t.splice(i,1)}function Ct(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Gt=class extends xe{constructor(e=null,i,n){super(yn(i),vn(n,i)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(i),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ae(i)&&(i.nonNullable||i.initialValueIsDefault)&&(Ct(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,i={}){this.value=this._pendingValue=e,this._onChange.length&&i.emitModelToViewChange!==!1&&this._onChange.forEach(n=>n(this.value,i.emitViewToModelChange!==!1)),this.updateValueAndValidity(i)}patchValue(e,i={}){this.setValue(e,i)}reset(e=this.defaultValue,i={}){this._applyFormState(e),this.markAsPristine(i),this.markAsUntouched(i),this.setValue(this.value,i),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){vt(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){vt(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Ct(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Ut=new M(""),xn={provide:G,useExisting:me(()=>Pe)},Pe=(()=>{let e=class e extends G{set isDisabled(n){}constructor(n,r,s,a,l){super(),this._ngModelWarningConfig=a,this.callSetDisabledState=l,this.update=new W,this._ngModelWarningSent=!1,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=Sn(this,s)}ngOnChanges(n){if(this._isControlChanged(n)){let r=n.form.previousValue;r&&_t(r,this,!1),Vn(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}Fn(n,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&_t(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_isControlChanged(n){return n.hasOwnProperty("form")}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(r){return new(r||e)(c(rn,10),c(sn,10),c(bt,10),c(Ut,8),c(jt,8))},e.\u0275dir=E({type:e,selectors:[["","formControl",""]],inputs:{form:[w.None,"formControl","form"],isDisabled:[w.None,"disabled","isDisabled"],model:[w.None,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[T([xn]),N,Qe]});let t=e;return t})();var On=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ye({type:e}),e.\u0275inj=ge({});let t=e;return t})();var Bt=(()=>{let e=class e{static withConfig(n){return{ngModule:e,providers:[{provide:Ut,useValue:n.warnOnNgModelWithFormControl??"always"},{provide:jt,useValue:n.callSetDisabledState??Oe}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ye({type:e}),e.\u0275inj=ge({imports:[On]});let t=e;return t})();var g=Symbol("STATE_SIGNAL");function V(t,...e){t[g].update(i=>e.reduce((n,r)=>o(o({},n),typeof r=="function"?r(n):r),i))}function Ht(t){let e=Y(()=>t());return Nn(e)?new Proxy(t,{get(i,n){return n in e?(q(i[n])||Object.defineProperty(i,n,{value:we(()=>i()[n]),configurable:!0}),Ht(i[n])):i[n]}}):t}function Nn(t){return t?.constructor===Object}function Lt(...t){let e=[...t],i="providedIn"in e[0]?e.shift():{},n=e;return(()=>{class s{constructor(){let l=n.reduce((U,Zt)=>Zt(U),kn()),{slices:u,signals:_,methods:he,hooks:Kt}=l,je=o(o(o({},u),_),he);this[g]=l[g];for(let U in je)this[U]=je[U];let{onInit:Re,onDestroy:Ge}=Kt;Re&&Re(),Ge&&m($).onDestroy(Ge)}static \u0275fac=function(u){return new(u||s)};static \u0275prov=D({token:s,factory:s.\u0275fac,providedIn:i.providedIn||null})}return s})()}function kn(){return{[g]:tt({}),slices:{},signals:{},methods:{},hooks:{}}}function le(t,e){return Object.keys(t).reduce((i,n)=>(e.includes(n)||(i[n]=t[n]),i),{})}function $t(t){return e=>{let i=o(o(o({[g]:e[g]},e.slices),e.signals),e.methods),n=typeof t=="function"?t(i):t,r=s=>{let a=n[s],l=e.hooks[s];return a?()=>{l&&l(),a(i)}:l};return d(o({},e),{hooks:{onInit:r("onInit"),onDestroy:r("onDestroy")}})}}function Wt(t){return e=>{let i=t(o(o(o({[g]:e[g]},e.slices),e.signals),e.methods)),n=Object.keys(i),r=le(e.slices,n),s=le(e.signals,n);return d(o({},e),{slices:r,signals:s,methods:o(o({},e.methods),i)})}}function qt(t){return e=>{let i=typeof t=="function"?t():t,n=Object.keys(i);e[g].update(l=>o(o({},l),i));let r=n.reduce((l,u)=>{let _=we(()=>e[g]()[u]);return d(o({},l),{[u]:Ht(_)})},{}),s=le(e.signals,n),a=le(e.methods,n);return d(o({},e),{slices:o(o({},e.slices),r),signals:s,methods:a})}}function ue(t,e){e?.injector||Je(ue);let i=e?.injector??m(Ce),n=i.get($),r=new Be,s=t(r).subscribe();n.onDestroy(()=>s.unsubscribe());let a=l=>{if(q(l)){let u=X(()=>{let he=l();Y(()=>r.next(he))},{injector:i}),_={unsubscribe:()=>u.destroy()};return s.add(_),_}if($e(l)){let u=l.subscribe(_=>r.next(_));return s.add(u),u}return r.next(l),{unsubscribe:Ue}};return a.unsubscribe=s.unsubscribe.bind(s),a}function Ne(t,e,i){let n=typeof t=="function"?{next:t,error:e,complete:i}:t;return r=>r.pipe(P({next:n.next,complete:n.complete}),ze(s=>(n.error(s),He)),n.finalize?Ke(n.finalize):s=>s)}var ce=(()=>{let e=class e{constructor(){this.messages=[];try{let n=JSON.parse(localStorage.getItem("messages")||"[]");Array.isArray(n)&&n.forEach(r=>{this.messages.push(new v(r))})}catch{this.messages=[],localStorage.setItem("messages",JSON.stringify([])),console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0438\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u0438 \u0441\u043F\u0438\u0441\u043A\u0430 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0439 \u0438\u0437 \u0445\u0440\u0430\u043D\u0438\u043B\u0438\u0449\u0430")}}getAll(){return b(this.messages).pipe(H(1e3))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})();var ke={commands:[{id:1,command:"\u041F\u0440\u0438\u0432\u0435\u0442",response:"\u0417\u0434\u0440\u0430\u0432\u0441\u0442\u0432\u0443\u0439\u0442\u0435! \u0427\u0435\u043C \u043C\u043E\u0433\u0443 \u043F\u043E\u043C\u043E\u0447\u044C?"},{id:2,command:"\u041A\u0430\u043A \u0442\u0435\u0431\u044F \u0437\u043E\u0432\u0443\u0442?",response:"\u042F \u0432\u0430\u0448 \u0432\u0438\u0440\u0442\u0443\u0430\u043B\u044C\u043D\u044B\u0439 \u0430\u0441\u0441\u0438\u0441\u0442\u0435\u043D\u0442."},{id:3,command:"\u041F\u043E\u043C\u043E\u0449\u044C",response:"\u0412\u044B \u043C\u043E\u0436\u0435\u0442\u0435 \u0437\u0430\u0434\u0430\u0442\u044C \u043C\u043D\u0435 \u043B\u044E\u0431\u043E\u0439 \u0432\u043E\u043F\u0440\u043E\u0441."}],unknownCommandResponse:"\u0418\u0437\u0432\u0438\u043D\u0438\u0442\u0435, \u044F \u043D\u0435 \u043F\u043E\u043D\u0438\u043C\u0430\u044E \u044D\u0442\u0443 \u043A\u043E\u043C\u0430\u043D\u0434\u0443."};var de=(()=>{let e=class e{getCommandListInfo(n){let r=ke.commands.find(s=>s.command.toLowerCase()===n.toLocaleLowerCase())?.response??ke.unknownCommandResponse;return b(r).pipe(H(2e3))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})();var Tn={messages:[],isLoading:!1,sendingRequest:!1},Te=Lt(qt(Tn),Wt((t,e=m(ce),i=m(de))=>({add(n){V(t,r=>({messages:[...r.messages,n]})),n.author.type===p.USER&&this.getAnswer(n)},getAnswer:ue(fe(P(()=>V(t,{sendingRequest:!0})),pe(n=>i.getCommandListInfo(n.text).pipe(Ne({next:r=>{let s=new v({text:r,author:{type:p.CHATBOT}});V(t,a=>({messages:[...a.messages,s],sendingRequest:!1})),localStorage.setItem("messages",JSON.stringify(t.messages()))},error:r=>{V(t,{isLoading:!1}),console.error(r)}}))))),loadAll:ue(fe(P(()=>V(t,{isLoading:!0})),pe(()=>e.getAll().pipe(Ne({next:n=>V(t,{messages:n,isLoading:!1}),error:n=>{V(t,{isLoading:!1}),console.error(n)}})))))})),$t({onInit({loadAll:t}){t()}}));var jn=["messageArea"];function Rn(t,e){if(t&1&&A(0,"app-message",11),t&2){let i=e.$implicit;K(i.author.type),z("message",i)}}function Gn(t,e){t&1&&(f(0,"span",12),S(1,"\u041F\u043E\u043A\u0430 \u043D\u0435\u0442 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0439"),y())}function Un(t,e){if(t&1&&F(0,Gn,2,0,"span",12),t&2){let i=Z();I(0,i.isLoading()?-1:0)}}function Bn(t,e){t&1&&A(0,"div",4)}var zt=(()=>{let e=class e{constructor(){this.store=m(Te),this.messageList=this.store.messages,this.isLoading=this.store.isLoading,this.sendingRequest=this.store.sendingRequest,this.messageCtrl=new Gt(null,[ie.required]),X(()=>{this.messageList()&&setTimeout(()=>{this.messageArea.nativeElement?.lastElementChild?.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})})})}sendMessage(){!this.messageCtrl.valid||this.sendingRequest()||(this.store.add(new v({text:this.messageCtrl.value,author:{type:p.USER}})),this.messageCtrl.patchValue(null))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=L({type:e,selectors:[["app-chat"]],viewQuery:function(r,s){if(r&1&&at(jn,5),r&2){let a;lt(a=ut())&&(s.messageArea=a.first)}},standalone:!0,features:[T([de,ce,Te]),Q],decls:13,vars:4,consts:[["messageArea",""],[1,"chat"],["data-test-id","message-area",1,"chat__message-list"],[3,"message","class"],[1,"typing-loader"],[1,"chat__input"],["type","text","placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u043F\u0440\u043E\u0441 \u0437\u0434\u0435\u0441\u044C","data-test-id","chat-input",3,"keyup.enter","formControl"],["data-test-id","send-button",3,"click","disabled"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","m3 3 3 9-3 9 19-9Z"],["d","M6 12h16"],[3,"message"],[1,"chat__empty-message"]],template:function(r,s){if(r&1){let a=ot();f(0,"div",1)(1,"div",2,0),rt(3,Rn,1,3,"app-message",3,it,!1,Un,1,1),F(6,Bn,1,0,"div",4),y(),f(7,"div",5)(8,"input",6),k("keyup.enter",function(){return _e(a),ve(s.sendMessage())}),y(),f(9,"button",7),k("click",function(){return _e(a),ve(s.sendMessage())}),Ye(),f(10,"svg",8),A(11,"path",9)(12,"path",10),y()()()()}r&2&&(h(3),st(s.messageList()),h(3),I(6,s.sendingRequest()||s.isLoading()?6:-1),h(2),z("formControl",s.messageCtrl),h(),z("disabled",s.sendingRequest()))},dependencies:[ft,Bt,oe,Tt,Pe],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;height:calc(100% - 85px)}.chat[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;width:1200px;max-width:80vw}.chat__message-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;min-height:100%;overflow-y:scroll}.chat__message-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:0px}.chat__message-list[_ngcontent-%COMP%]   app-message[_ngcontent-%COMP%]{display:block}.chat__empty-message[_ngcontent-%COMP%]{text-align:center;color:#7b7b7bbf}.chat__input[_ngcontent-%COMP%]{position:fixed;bottom:0;display:flex;flex-direction:row;width:100%;padding:1rem 0;gap:.5rem;max-width:80vw}.chat__input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:8;border:none;box-shadow:0 1px 10px 2px #223c501a;border-radius:.5rem;padding:1rem}.chat__input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer;font-weight:300;font-size:.75rem;color:#f3f3f3;background-color:#0047ff;border:none;border-radius:.5rem;padding:.5rem 1rem}.chat__input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1.25rem}.chat__input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#003eda}.chat__input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background:#7b7b7bbf}@media (max-width: 771px){.chat__input[_ngcontent-%COMP%]{max-width:unset!important;padding:1rem;right:0}}@media (max-width: 771px){.chat[_ngcontent-%COMP%]{width:100%;padding:0 1rem;max-width:unset!important}}"]});let t=e;return t})();var mr=[{path:"",component:zt,title:"\u0447\u0430\u0442\u0431\u043E\u0442"}];export{mr as CHAT_ROUTES};
